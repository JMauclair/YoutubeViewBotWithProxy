#Generating the .NET Chrome DevTools Protocol code

The object model for the .NET implementation for the Chrome DevTools Protocol (CDP)
is auto-generated by another project, and the resulting source code copied into
the .NET bindings source code. The initial generated code was based on the code
generated by the [BaristaLabs chrome-dev-tools-generator project](https://github.com/BaristaLabs/chrome-dev-tools-generator).
However, the code generated by that project made some interesting design choices
in its API that the Selenium .NET bindings maintainers were not fond of (use of
`Action<object>` event handlers instead of proper .NET events, unnecessary use
of a complex data structures like `ActionBlock<T>`, undesirable use of dependencies
on third-party libraries like `WebSocket4Net`, etc.), so a fork was created.
The instructions for updating the generated code are listed below. Please note
that the generation of the CDP API requires an active network connectiion at
present.

##Prerequisites:
* Git
* Visual Studio 2019
* .NET Core 2.1
* Google Chrome (Stable channel preferred)
* Clone of the Selenium project source code (directory referred to as
`$SeleniumProjectDirectory` below; substitute the actual directory in
your environment)

##Instructions:
1. In a Visual Studio Developer Command Prompt, clone the project from
https://github.com/jimevans/chrome-dev-tools-generator. By default, this will
be cloned into a directory named `chrome-dev-tools-generator`, but this can
be customized (see Git documentation for how). Since this may be different
for each user, in the sample commands below, that directory hereafter will
be referred to as `$GeneratorToolDirectory`, and you should use the actual
directory name you cloned the project into.

    git clone https://github.com/jimevans/chrome-dev-tools-generator

2. At a command prompt, change into the `src\ChromeDevToolsGeneratorCLI`
directory.

    cd $GeneratorToolDirectory\src\ChromeDevToolsGeneratorCLI

3. Generate the source code by using the `dotnet run` command with the
appropriate command-line arguments. This will build and run the generation
tool, using the settings file (`-s`) found in the Selenium project's 
third_party directory, forcing the tool to download the protocol definition
(`-f`) for the installed version of Chrome, and writing the generated files
to the specified directory (`-o`). Note below, there is a double-dash (`--`)
command-line argument. This is not a typo, and is important.

    dotnet run -- -o $SeleniumProjectDirectory\dotnet\src\webdriver\DevTools\AutoGenerated -f -s $SeleniumProjectDirectory\third_party\dotnet\devtools_generation\settings.json

4. Submit the resulting diff for approval as a PR in Git.
